<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Image to PDF Converter | Premium Tool</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.14.0/Sortable.min.js"></script>
    <style>
      :root {
        /* Premium color palette */
        --premium-primary: #7d19f6;
        --premium-secondary: #ffffff;
        --premium-accent: #d8dae8f1;
        --premium-dark: #050f12;
        --premium-light: #e4e7f5;
        --premium-success: #010702;
        --premium-warning: #c4b9a5;
        --premium-danger: #ed0e0e;
        --premium-info: #0687e9;
        
        /* Gradient backgrounds */
        --gradient-primary: linear-gradient(135deg, var(--premium-primary) 0%, var(--premium-secondary) 100%);
        --gradient-dark: linear-gradient(135deg, #2d3436 0%, #000000 100%);
        --gradient-light: linear-gradient(145deg, #003cffd6 0%, #99ff00e3 100%);
        --gradient-accent: linear-gradient(135deg, var(--premium-accent) 0%, #ff7675 100%);
        
        /* Premium shadows */
        --shadow-sm: 0 8px 12px rgba(0, 0, 0, 0.371);
        --shadow-md: 0 8px 20px rgba(0, 0, 0, 0.704);
        --shadow-lg: 0 10px 15px rgb(22, 4, 4);
        --shadow-xl: 6px 12px 25px #060404e7, 1px 8px 12px #000000f3;
        --shadow-inner: inset 0 4px 8px rgba(0, 0, 0, 0.06);
        
        /* Border radius */
        --radius-sm: 4px;
        --radius-md: 8px;
        --radius-lg: 12px;
        --radius-xl: 16px;
        --radius-full: 9999px;
        
        /* Transitions */
        --transition-fast: all 0.15s ease;
        --transition-normal: all 0.3s ease;
        --transition-slow: all 0.5s ease;
      }

      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      body {
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        background: var(--gradient-light);
        color: var(--premium-dark);
        min-height: 100vh;
        padding: 1rem;
        margin: 0;
        line-height: 1.5;
        -webkit-font-smoothing: antialiased;
        -moz-osx-font-smoothing: grayscale;
        -webkit-tap-highlight-color: transparent;
      }

      /* Premium glass container */
      .converter-app {
        width: 100%;
        max-width: 1000px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.15);
        backdrop-filter: blur(20px);
        -webkit-backdrop-filter: blur(20px);
        border-radius: var(--radius-xl);
        box-shadow: var(--shadow-xl);
        padding: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.18);
        overflow: hidden;
        position: relative;
      }

      /* Decorative elements */
      .converter-app::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: radial-gradient(circle, rgba(108, 92, 231, 0.1) 0%, rgba(255, 255, 255, 0) 70%);
        z-index: -1;
      }

      /* App header with animated gradient text */
      .app-header {
        text-align: center;
        margin-bottom: 2.5rem;
        position: relative;
      }

      .app-header h1 {
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 800;
        margin: 0 0 0.5rem 0;
        background: linear-gradient(90deg, 
          var(--premium-primary), 
          var(--premium-accent), 
          var(--premium-secondary));
        background-size: 200% auto;
        -webkit-background-clip: text;
        background-clip: text;
        color: transparent;
        line-height: 1.2;
        animation: gradientText 3s linear infinite;
      }

      @keyframes gradientText {
        0% { background-position: 0% center; }
        100% { background-position: 200% center; }
      }

      .subtitle {
        color: rgba(45, 52, 54, 0.8);
        font-size: clamp(1rem, 3vw, 1.2rem);
        margin-top: 0.5rem;
        font-weight: 400;
      }

      /* Premium upload box with animated border */
      .upload-section {
        margin-bottom: 2rem;
        position: relative;
      }

      .upload-box {
        position: relative;
        border: none;
        border-radius: var(--radius-lg);
        padding: 3rem 2rem;
        text-align: center;
        transition: var(--transition-normal);
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(10px);
        overflow: hidden;
        z-index: 1;
        cursor: pointer;
        box-shadow: var(--shadow-md);
        animation: float 6s ease-in-out infinite;
      }

      .upload-box::before {
        content: '';
        position: absolute;
        top: -2px;
        left: -2px;
        right: -2px;
        bottom: -2px;
        background: linear-gradient(45deg, 
          var(--premium-primary), 
          var(--premium-accent), 
          var(--premium-secondary), 
          var(--premium-primary));
        background-size: 400% 400%;
        z-index: -1;
        border-radius: var(--radius-lg);
        animation: gradientBorder 6s ease infinite;
        opacity: 0.7;
      }

      @keyframes gradientBorder {
        0% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
        100% { background-position: 0% 50%; }
      }

      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-10px); }
        100% { transform: translateY(0px); }
      }

      .upload-box:hover::before {
        opacity: 1;
      }

      .upload-icon svg {
        width: 60px;
        height: 60px;
        fill: var(--premium-primary);
        margin-bottom: 1.5rem;
        filter: drop-shadow(0 5px 15px rgba(108, 92, 231, 0.3));
      }

      .upload-box h3 {
        font-size: clamp(1.2rem, 4vw, 1.5rem);
        margin: 0 0 0.5rem;
        color: var(--premium-dark);
        font-weight: 600;
      }

      .upload-box p {
        color: rgba(45, 52, 54, 0.7);
        margin: 0.5rem 0;
        font-size: clamp(0.9rem, 3vw, 1rem);
      }

      .browse-btn {
        background: rgba(255, 255, 255, 0.2);
        color: var(--premium-primary);
        border: 2px solid var(--premium-primary);
        padding: 0.75rem 2rem;
        border-radius: var(--radius-full);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-normal);
        margin-top: 1.5rem;
        min-height: 48px;
        font-size: 1rem;
        width: 100%;
        max-width: 220px;
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        box-shadow: var(--shadow-sm);
      }

      .browse-btn:hover {
        background: var(--premium-primary);
        color: white;
        transform: translateY(-2px);
        box-shadow: var(--shadow-md);
      }

      /* File preview section */
      .preview-section {
        margin-bottom: 2rem;
      }

      .preview-section h3 {
        font-size: clamp(1.2rem, 4vw, 1.5rem);
        margin-bottom: 1.5rem;
        color: var(--premium-dark);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .preview-section h3::before {
        content: '';
        display: inline-block;
        width: 24px;
        height: 24px;
        background: var(--gradient-primary);
        border-radius: var(--radius-sm);
        mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cpolyline points='8 12 12 16 22 6'%3E%3C/polyline%3E%3C/svg%3E") no-repeat center;
        -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='3' y='3' width='18' height='18' rx='2' ry='2'%3E%3C/rect%3E%3Cpolyline points='8 12 12 16 22 6'%3E%3C/polyline%3E%3C/svg%3E") no-repeat center;
      }

      #file-count {
        font-size: 0.9rem;
        color: rgba(45, 52, 54, 0.7);
        font-weight: 400;
        margin-left: auto;
      }

      .file-list {
        background: rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
        border-radius: var(--radius-lg);
        padding: 1.5rem;
        min-height: 180px;
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: var(--shadow-sm);
      }

      .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        height: 100%;
        color: rgba(45, 52, 54, 0.5);
        font-size: clamp(0.9rem, 3vw, 1rem);
        gap: 1rem;
      }

      .empty-state svg {
        width: 48px;
        height: 48px;
        fill: rgba(108, 92, 231, 0.3);
      }

      /* Premium thumbnail grid */
      .thumbnail-container {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        gap: 12px;
        margin-top: 12px;
      }

      @media (min-width: 480px) {
        .thumbnail-container {
          grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
        }
      }

      @media (min-width: 768px) {
        .thumbnail-container {
          grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
        }
      }

      .thumbnail-item {
        position: relative;
        border-radius: var(--radius-md);
        overflow: hidden;
        box-shadow: var(--shadow-md);
        aspect-ratio: 1;
        background: var(--gradient-light);
        transition: var(--transition-normal);
        border: 2px solid rgba(255, 255, 255, 0.3);
      }

      .thumbnail-item:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: var(--shadow-lg);
        border-color: var(--premium-primary);
      }

      .thumbnail-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        display: block;
        transition: var(--transition-normal);
      }

      .thumbnail-item:hover img {
        transform: scale(1.05);
      }

      .thumbnail-actions {
        position: absolute;
        top: 10px;
        right: 10px;
        display: flex;
        gap: 8px;
        opacity: 0;
        transition: var(--transition-normal);
      }

      .thumbnail-item:hover .thumbnail-actions {
        opacity: 1;
      }

      .thumbnail-btn {
        width: 36px;
        height: 36px;
        border-radius: var(--radius-full);
        background: rgba(0, 0, 0, 0.7);
        color: white;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        font-size: 16px;
        transition: var(--transition-fast);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .thumbnail-btn:hover {
        background: rgba(0, 0, 0, 0.9);
        transform: scale(1.1);
      }

      .rotate-btn::after {
        content: "↻";
      }

      .delete-btn::after {
        content: "×";
      }

      /* Premium options section */
      .options-section {
        background: rgba(255, 255, 255, 0.3);
        backdrop-filter: blur(10px);
        border-radius: var(--radius-lg);
        padding: 1.75rem;
        margin-bottom: 2rem;
        border: 1px solid rgba(255, 255, 255, 0.3);
        box-shadow: var(--shadow-sm);
      }

      .options-section h3 {
        font-size: clamp(1.2rem, 4vw, 1.5rem);
        margin-bottom: 1.75rem;
        color: var(--premium-dark);
        font-weight: 600;
        display: flex;
        align-items: center;
        gap: 0.5rem;
      }

      .options-section h3::before {
        content: '';
        display: inline-block;
        width: 24px;
        height: 24px;
        background: var(--gradient-primary);
        border-radius: var(--radius-sm);
        mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='3'%3E%3C/circle%3E%3Cpath d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z'%3E%3C/path%3E%3C/svg%3E") no-repeat center;
        -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='3'%3E%3C/circle%3E%3Cpath d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z'%3E%3C/path%3E%3C/svg%3E") no-repeat center;
      }

      .option-row {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        margin-bottom: 1.5rem;
      }

      @media (min-width: 768px) {
        .option-row {
          flex-direction: row;
          align-items: center;
        }
      }

      .option-row label {
        width: 100%;
        font-weight: 500;
        color: var(--premium-dark);
        margin-bottom: 0.5rem;
        font-size: clamp(0.95rem, 3vw, 1.05rem);
      }

      @media (min-width: 768px) {
        .option-row label {
          width: 180px;
          margin-bottom: 0;
        }
      }

      .option-row select,
      .option-row input {
        flex: 1;
        width: 100%;
        padding: 0.9rem 1.2rem;
        border: 2px solid rgba(108, 92, 231, 0.2);
        border-radius: var(--radius-md);
        background: rgba(255, 255, 255, 0.8);
        transition: var(--transition-normal);
        font-size: 1rem;
        min-height: 48px;
        box-shadow: var(--shadow-sm);
      }

      /* Premium select dropdown */
      select {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        background-image: url("data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%236c5ce7' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e");
        background-repeat: no-repeat;
        background-position: right 1rem center;
        background-size: 1em;
        padding-right: 2.5rem !important;
      }

      .option-row select:focus,
      .option-row input:focus {
        outline: none;
        border-color: var(--premium-primary);
        box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.1);
      }

      /* Premium checkbox group */
      .checkbox-group {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        width: 100%;
      }

      @media (min-width: 768px) {
        .checkbox-group {
          flex-direction: row;
          gap: 1.5rem;
        }
      }

      .checkbox-option {
        display: flex;
        align-items: center;
        gap: 0.75rem;
        cursor: pointer;
      }

      .checkbox-option input[type="checkbox"] {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
        width: 20px;
        height: 20px;
        border: 2px solid var(--premium-secondary);
        border-radius: var(--radius-sm);
        outline: none;
        cursor: pointer;
        position: relative;
        transition: var(--transition-fast);
        flex-shrink: 0;
      }

      .checkbox-option input[type="checkbox"]:checked {
        background: var(--premium-primary);
        border-color: var(--premium-primary);
      }

      .checkbox-option input[type="checkbox"]:checked::after {
        content: '✓';
        position: absolute;
        color: rgb(220, 213, 213);
        font-size: 12px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
      }

      .checkbox-option label {
        cursor: pointer;
        user-select: none;
        transition: var(--transition-fast);
        font-weight: 400;
        margin: 0;
      }

      .checkbox-option:hover label {
        color: var(--premium-primary);
      }

      /* Action buttons */
      .action-buttons {
        display: flex;
        flex-direction: column;
        gap: 1rem;
        margin-bottom: 2rem;
      }

      @media (min-width: 768px) {
        .action-buttons {
          flex-direction: row;
          gap: 1.5rem;
        }
      }

      .convert-btn, .clear-btn {
        width: 100%;
        min-height: 56px;
        font-size: 1.1rem;
        padding: 1rem 2rem;
        border-radius: var(--radius-full);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-normal);
        position: relative;
        overflow: hidden;
        z-index: 1;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: var(--shadow-md);
        border: none;
      }

      @media (min-width: 768px) {
        .convert-btn, .clear-btn {
          width: auto;
          flex: 1;
        }
      }

      .convert-btn {
        background: var(--gradient-primary);
        color: white;
      }

      .convert-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.1));
        z-index: -1;
        transition: var(--transition-normal);
        opacity: 0;
      }

      .convert-btn:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      .convert-btn:hover::before {
        opacity: 1;
      }

      .convert-btn:active {
        transform: translateY(-1px);
      }

      .clear-btn {
        background: rgba(255, 255, 255, 0.2);
        color: var(--premium-danger);
        border: 2px solid var(--premium-danger);
        backdrop-filter: blur(5px);
        -webkit-backdrop-filter: blur(5px);
      }

      .clear-btn:hover {
        background: var(--premium-danger);
        color: white;
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      /* Status section */
      .status-section {
        margin-bottom: 2rem;
      }

      .progress-bar {
        height: 10px;
        background: rgba(255,255,255,0.2);
        border-radius: var(--radius-full);
        overflow: hidden;
        margin-bottom: 1rem;
        box-shadow: var(--shadow-inner);
      }

      .progress-fill {
        height: 100%;
        background: var(--gradient-primary);
        border-radius: var(--radius-full);
        transition: width 0.5s ease;
        position: relative;
        overflow: hidden;
      }

      .progress-fill::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          #ffffff00 0%,
          #ce010165 50%,
          #e9c5c594 100%
        );
        animation: shimmer 2s infinite;
      }

      @keyframes shimmer {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }

      .status-message {
        text-align: center;
        color: rgba(45, 52, 54, 0.8);
        font-size: clamp(0.9rem, 3vw, 1rem);
        font-weight: 500;
      }

      /* Download section */
      .download-section {
        text-align: center;
        animation: fadeIn 0.5s ease;
        display: none;
        background: rgba(0, 184, 148, 0.1);
        border-radius: var(--radius-lg);
        padding: 2rem;
        border: 2px dashed var(--premium-success);
      }

      .download-section h3 {
        font-size: clamp(1.3rem, 4vw, 1.8rem);
        color: var(--premium-success);
        margin-bottom: 1.5rem;
        font-weight: 700;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
      }

      .download-section h3::before {
        content: '';
        display: inline-block;
        width: 28px;
        height: 28px;
        background: var(--premium-success);
        mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'%3E%3C/path%3E%3Cpolyline points='7 10 12 15 17 10'%3E%3C/polyline%3E%3Cline x1='12' y1='15' x2='12' y2='3'%3E%3C/line%3E%3C/svg%3E") no-repeat center;
        -webkit-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'%3E%3C/path%3E%3Cpolyline points='7 10 12 15 17 10'%3E%3C/polyline%3E%3Cline x1='12' y1='15' x2='12' y2='3'%3E%3C/line%3E%3C/svg%3E") no-repeat center;
      }

      .download-btn {
        background: var(--gradient-primary);
        color: rgb(50, 84, 255);
        border: none;
        padding: 1rem 2.5rem;
        border-radius: var(--radius-full);
        font-weight: 600;
        cursor: pointer;
        transition: var(--transition-normal);
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.75rem;
        min-height: 56px;
        font-size: 1.1rem;
        width: 100%;
        max-width: 280px;
        position: relative;
        overflow: hidden;
        z-index: 1;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: var(--shadow-md);
      }

      .download-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0.1));
        z-index: -1;
        transition: var(--transition-normal);
        opacity: 0;
      }

      .download-btn:hover::before {
        opacity: 1;
      }

      .download-btn::after {
        content: '↓';
        font-size: 1.2rem;
        transition: var(--transition-normal);
      }

      .download-btn:hover {
        transform: translateY(-3px);
        box-shadow: var(--shadow-lg);
      }

      .download-btn:hover::after {
        transform: translateY(3px);
      }

      /* Toast notifications */
      .toast {
        position: fixed;
        bottom: 25px;
        right: 25px;
        padding: 1rem 1.5rem;
        border-radius: var(--radius-md);
        color: white;
        font-weight: 500;
        box-shadow: var(--shadow-xl);
        z-index: 1000;
        animation: slideIn 0.3s ease-out;
        transform: translateY(0);
        font-size: 0.95rem;
        max-width: 90%;
        display: flex;
        align-items: center;
        gap: 0.75rem;
        backdrop-filter: blur(10px);
        -webkit-backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.1);
      }

      .toast::before {
        content: '';
        display: inline-block;
        width: 20px;
        height: 20px;
        background: white;
        mask-repeat: no-repeat;
        mask-position: center;
        -webkit-mask-repeat: no-repeat;
        -webkit-mask-position: center;
        flex-shrink: 0;
      }

      .toast-success {
        background: rgba(0, 171, 11, 0.9);
      }

      .toast-success::before {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 11.08V12a10 10 0 1 1-5.93-9.14'%3E%3C/path%3E%3Cpolyline points='22 4 12 14.01 9 11.01'%3E%3C/polyline%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 11.08V12a10 10 0 1 1-5.93-9.14'%3E%3C/path%3E%3Cpolyline points='22 4 12 14.01 9 11.01'%3E%3C/polyline%3E%3C/svg%3E");
      }

      .toast-error {
        background: rgba(252, 31, 23, 0.51);
      }

      .toast-error::before {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='15' y1='9' x2='9' y2='15'%3E%3C/line%3E%3Cline x1='9' y1='9' x2='15' y2='15'%3E%3C/line%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='15' y1='9' x2='9' y2='15'%3E%3C/line%3E%3Cline x1='9' y1='9' x2='15' y2='15'%3E%3C/line%3E%3C/svg%3E");
      }

      .toast-info {
        background: rgba(1, 250, 14, 0.9);
      }

      .toast-info::before {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='16' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='8' x2='12.01' y2='8'%3E%3C/line%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='10'%3E%3C/circle%3E%3Cline x1='12' y1='16' x2='12' y2='12'%3E%3C/line%3E%3Cline x1='12' y1='8' x2='12.01' y2='8'%3E%3C/line%3E%3C/svg%3E");
      }

      .toast-warning {
        background: rgba(255, 183, 49, 0.512);
        color: var(--premium-dark);
      }

      .toast-warning::before {
        mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z'%3E%3C/path%3E%3Cline x1='12' y1='9' x2='12' y2='13'%3E%3C/line%3E%3Cline x1='12' y1='17' x2='12.01' y2='17'%3E%3C/line%3E%3C/svg%3E");
        -webkit-mask-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z'%3E%3C/path%3E%3Cline x1='12' y1='9' x2='12' y2='13'%3E%3C/line%3E%3Cline x1='12' y1='17' x2='12.01' y2='17'%3E%3C/line%3E%3C/svg%3E");
      }

      .fade-out {
        animation: fadeOut 0.3s ease-in;
        opacity: 0;
      }

      @keyframes slideIn {
        from { transform: translateY(100px); opacity: 0; }
        to { transform: translateY(0); opacity: 1; }
      }

      @keyframes fadeOut {
        from { opacity: 1; }
        to { opacity: 0; }
      }

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
      }

      /* Responsive adjustments */
      @media (max-width: 768px) {
        body {
          padding: 1rem;
        }

        .converter-app {
          padding: 1.5rem;
        }

        .upload-box {
          padding: 2rem 1rem;
        }

        .options-section {
          padding: 1.25rem;
        }

        .file-list {
          padding: 1rem;
        }

        .thumbnail-container {
          grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
        }
      }

      @media (max-width: 480px) {
        .converter-app {
          padding: 1.25rem;
        }

        .thumbnail-container {
          grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
        }

        .convert-btn, .clear-btn, .download-btn {
          min-height: 48px;
          font-size: 1rem;
          padding: 0.75rem 1.5rem;
        }
      }

      /* Prevent zooming on input focus on mobile */
      @media screen and (max-width: 768px) {
        input, select, textarea {
          font-size: 16px;
        }
      }
    </style>
</head>
<body>
    <div class="converter-app">
        <div class="app-header">
            <h1>Image to PDF Converter</h1>
            <p class="subtitle">Transform your images into professional PDF documents</p>
        </div>

        <div class="upload-section">
            <div class="upload-box" id="uploadBox">
                <div class="upload-icon">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"></path>
                    </svg>
                </div>
                <h3>Drag & Drop images here</h3>
                <p>or</p>
                <button class="browse-btn">Browse Files</button>
                <input type="file" id="file-input" accept="image/*" multiple style="display: none;">
            </div>
        </div>

        <div class="preview-section">
            <h3>Selected Files <span id="file-count" style="font-size: 0.9rem; color: #64748b;"></span></h3>
            <div class="file-list">
                <div class="thumbnail-container" id="thumbnailContainer"></div>
                <div class="empty-state" id="emptyState">
                    <svg viewBox="0 0 24 24" aria-hidden="true">
                        <path d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    <p>No files selected yet</p>
                </div>
            </div>
        </div>

        <div class="options-section">
            <h3>PDF Options</h3>
            <div class="option-row">
                <label for="page-size">Page Size:</label>
                <select id="page-size">
                    <option value="a4">A4</option>
                    <option value="letter">Letter</option>
                    <option value="a5">A5</option>
                    <option value="auto">Auto (Image Size)</option>
                </select>
            </div>
            <div class="option-row">
                <label for="orientation">Orientation:</label>
                <select id="orientation">
                    <option value="portrait">Portrait</option>
                    <option value="landscape">Landscape</option>
                    <option value="auto">Auto</option>
                </select>
            </div>
            <div class="option-row">
                <label for="margin">Margin (mm):</label>
                <input type="number" id="margin" min="0" max="50" value="10">
            </div>
            <div class="option-row">
                <label for="quality">Quality:</label>
                <select id="quality">
                    <option value="high">High (300dpi)</option>
                    <option value="medium" selected>Medium (150dpi)</option>
                    <option value="low">Low (72dpi)</option>
                </select>
            </div>
            <div class="option-row">
                <div class="checkbox-group">
                    <label class="checkbox-option">
                        <input type="checkbox" id="compressPdf"> Compress PDF
                    </label>
                    <label class="checkbox-option">
                        <input type="checkbox" id="addPageNumbers"> Page Numbers
                    </label>
                </div>
            </div>
        </div>

        <div class="action-buttons">
            <button class="convert-btn">Convert to PDF</button>
            <button class="clear-btn">Clear All</button>
        </div>

        <div class="status-section">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 0%"></div>
            </div>
            <p class="status-message">Ready to convert</p>
        </div>

        <div class="download-section" style="display: none;">
            <h3>Conversion Complete!</h3>
            <button class="download-btn">Download PDF</button>
        </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', () => {
        // DOM Elements
        const uploadBox = document.querySelector('.upload-box');
        const fileInput = document.getElementById('file-input');
        const thumbnailContainer = document.getElementById('thumbnailContainer');
        const emptyState = document.getElementById('emptyState');
        const fileCount = document.getElementById('file-count');
        const convertBtn = document.querySelector('.convert-btn');
        const clearBtn = document.querySelector('.clear-btn');
        const progressFill = document.querySelector('.progress-fill');
        const statusMessage = document.querySelector('.status-message');
        const downloadSection = document.querySelector('.download-section');
        const downloadBtn = document.querySelector('.download-btn');
        
        // State
        let files = [];
        let pdfBlob = null;
        let sortable;
        
        // Initialize
        setupEventListeners();

        function setupEventListeners() {
          // Drag and drop
          uploadBox.addEventListener('dragover', handleDragOver);
          uploadBox.addEventListener('dragleave', handleDragLeave);
          uploadBox.addEventListener('drop', handleDrop);
          uploadBox.addEventListener('click', () => fileInput.click());
          
          // Touch events for mobile
          uploadBox.addEventListener('touchstart', handleTouchStart, { passive: true });
          uploadBox.addEventListener('touchend', handleTouchEnd, { passive: true });
          
          // File input
          fileInput.addEventListener('change', handleFileSelect);
          
          // Buttons
          convertBtn.addEventListener('click', convertToPDF);
          clearBtn.addEventListener('click', clearAll);
          downloadBtn.addEventListener('click', downloadPDF);
        }

        function handleTouchStart(e) {
          e.preventDefault();
          uploadBox.style.borderColor = '#6c5ce7';
          uploadBox.style.backgroundColor = 'rgba(108, 92, 231, 0.1)';
        }

        function handleTouchEnd(e) {
          e.preventDefault();
          uploadBox.style.borderColor = '#cbd5e1';
          uploadBox.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
          fileInput.click();
        }

        function handleDragOver(e) {
          e.preventDefault();
          e.stopPropagation();
          uploadBox.style.borderColor = '#6c5ce7';
          uploadBox.style.backgroundColor = 'rgba(108, 92, 231, 0.1)';
        }

        function handleDragLeave(e) {
          e.preventDefault();
          e.stopPropagation();
          uploadBox.style.borderColor = '#cbd5e1';
          uploadBox.style.backgroundColor = 'rgba(255, 255, 255, 0.2)';
        }

        function handleDrop(e) {
          e.preventDefault();
          e.stopPropagation();
          handleDragLeave(e);
          
          const droppedFiles = Array.from(e.dataTransfer.files);
          processFiles(droppedFiles);
        }

        function handleFileSelect(e) {
          const selectedFiles = Array.from(e.target.files);
          processFiles(selectedFiles);
          // Reset file input to allow selecting same files again
          e.target.value = '';
        }

        function processFiles(newFiles) {
          // Filter only image files
          const imageFiles = newFiles.filter(file => file.type.startsWith('image/'));
          
          if (imageFiles.length === 0) {
            showToast('Please select image files only', 'error');
            return;
          }
          
          // Add to existing files
          files = [...files, ...imageFiles.map(file => ({
            file,
            rotation: 0
          }))];
          
          renderThumbnails();
          
          // Show success message
          if (imageFiles.length === 1) {
            showToast('1 image added successfully', 'success');
          } else {
            showToast(`${imageFiles.length} images added successfully`, 'success');
          }
        }

        function renderThumbnails() {
          if (files.length === 0) {
            emptyState.style.display = 'flex';
            thumbnailContainer.innerHTML = '';
            fileCount.textContent = '';
            return;
          }
          
          emptyState.style.display = 'none';
          thumbnailContainer.innerHTML = '';
          fileCount.textContent = `(${files.length} files)`;
          
          files.forEach((item, index) => {
            const { file, rotation } = item;
            const thumbnailItem = document.createElement('div');
            thumbnailItem.className = 'thumbnail-item';
            thumbnailItem.draggable = true;
            thumbnailItem.dataset.index = index;
            
            const img = document.createElement('img');
            img.src = URL.createObjectURL(file);
            img.alt = file.name;
            img.style.transform = `rotate(${rotation}deg)`;
            
            const thumbnailActions = document.createElement('div');
            thumbnailActions.className = 'thumbnail-actions';
            
            const rotateBtn = document.createElement('button');
            rotateBtn.className = 'thumbnail-btn rotate-btn';
            rotateBtn.title = 'Rotate image';
            rotateBtn.addEventListener('click', (e) => {
              e.stopPropagation();
              rotateImage(index);
            });
            
            const deleteBtn = document.createElement('button');
            deleteBtn.className = 'thumbnail-btn delete-btn';
            deleteBtn.title = 'Remove image';
            deleteBtn.addEventListener('click', (e) => {
              e.stopPropagation();
              removeImage(index);
            });
            
            thumbnailActions.appendChild(rotateBtn);
            thumbnailActions.appendChild(deleteBtn);
            thumbnailItem.appendChild(img);
            thumbnailItem.appendChild(thumbnailActions);
            thumbnailContainer.appendChild(thumbnailItem);
          });
          
          // Initialize or update SortableJS for drag-and-drop reordering
          if (sortable) {
            sortable.destroy();
          }
          
          sortable = new Sortable(thumbnailContainer, {
            animation: 150,
            onEnd: function() {
              const newIndices = Array.from(thumbnailContainer.children).map(el => parseInt(el.dataset.index));
              const newFiles = newIndices.map(i => files[i]);
              files = newFiles;
              renderThumbnails();
            }
          });
        }

        function rotateImage(index) {
          files[index].rotation = (files[index].rotation + 90) % 360;
          renderThumbnails();
          showToast('Image rotated', 'info');
        }

        function removeImage(index) {
          files.splice(index, 1);
          renderThumbnails();
          showToast('Image removed', 'info');
        }

        function clearAll() {
          if (files.length === 0) return;
          
          files = [];
          renderThumbnails();
          resetConversionUI();
          showToast('All files cleared', 'info');
        }

        async function convertToPDF() {
          if (files.length === 0) {
            showToast('Please add images first', 'error');
            return;
          }
          
          // Prepare UI for conversion
          convertBtn.disabled = true;
          updateProgress(0, 'Preparing images...');
          
          try {
            // Load PDF-lib
            const { PDFDocument, rgb } = window.PDFLib;
            const pdfDoc = await PDFDocument.create();
            
            // Get settings
            const pageSize = document.getElementById('page-size').value;
            const orientation = document.getElementById('orientation').value;
            const margin = parseInt(document.getElementById('margin').value) || 10;
            const quality = document.getElementById('quality').value;
            const compress = document.getElementById('compressPdf').checked;
            const addPageNumbers = document.getElementById('addPageNumbers').checked;
            
            // Process each image
            for (let i = 0; i < files.length; i++) {
              const { file, rotation } = files[i];
              updateProgress((i / files.length) * 100, `Processing ${i+1}/${files.length}...`);
              
              // Add a new page for each image
              let page;
              const marginPoints = margin * 2.83465; // mm to points (1mm = 2.83465 points)
              
              if (pageSize === 'auto') {
                // Create page based on image dimensions
                const img = await loadImage(file);
                let imgWidth = img.width;
                let imgHeight = img.height;
                
                // Swap dimensions if rotated 90 or 270 degrees
                if (rotation === 90 || rotation === 270) {
                  [imgWidth, imgHeight] = [imgHeight, imgWidth];
                }
                
                // Convert pixels to points (1 inch = 72 points, assuming 96dpi screen)
                const widthPt = imgWidth * 0.75;
                const heightPt = imgHeight * 0.75;
                
                page = pdfDoc.addPage([widthPt, heightPt]);
              } else {
                // Create standard page size
                let width, height;
                
                switch(pageSize) {
                  case 'a4':
                    width = 595;
                    height = 842;
                    break;
                  case 'letter':
                    width = 612;
                    height = 792;
                    break;
                  case 'a5':
                    width = 420;
                    height = 595;
                    break;
                  default:
                    width = 595;
                    height = 842;
                }
                
                // Adjust for landscape if needed
                if (orientation === 'landscape' || 
                    (orientation === 'auto' && file.width > file.height)) {
                  [width, height] = [height, width];
                }
                
                page = pdfDoc.addPage([width, height]);
              }
              
              // Embed the image
              const imageBytes = await readFileAsArrayBuffer(file);
              let image;
              
              // Create canvas to handle rotation
              const canvas = await createRotatedCanvas(file, rotation);
              let imageDataUrl;
              
              if (file.type === 'image/jpeg') {
                imageDataUrl = await canvasToJpeg(canvas, quality);
                image = await pdfDoc.embedJpg(imageDataUrl);
              } else if (file.type === 'image/png') {
                imageDataUrl = canvas.toDataURL('image/png');
                image = await pdfDoc.embedPng(imageDataUrl);
              } else {
                // Convert other formats to JPEG
                imageDataUrl = await canvasToJpeg(canvas, quality);
                image = await pdfDoc.embedJpg(imageDataUrl);
              }
              
              // Calculate dimensions
              const pageWidth = page.getWidth();
              const pageHeight = page.getHeight();
              const availableWidth = pageWidth - marginPoints * 2;
              const availableHeight = pageHeight - marginPoints * 2;
              
              // Maintain aspect ratio
              const imageAspect = image.width / image.height;
              const pageAspect = availableWidth / availableHeight;
              
              let displayWidth, displayHeight;
              
              if (imageAspect > pageAspect) {
                displayWidth = availableWidth;
                displayHeight = availableWidth / imageAspect;
              } else {
                displayHeight = availableHeight;
                displayWidth = availableHeight * imageAspect;
              }
              
              // Center the image
              const x = marginPoints + (availableWidth - displayWidth) / 2;
              const y = marginPoints + (availableHeight - displayHeight) / 2;
              
              // Draw image on page
              page.drawImage(image, {
                x,
                y,
                width: displayWidth,
                height: displayHeight,
              });
              
              // Add page numbers if enabled
              if (addPageNumbers) {
                const pageCount = pdfDoc.getPageCount();
                page.drawText(`Page ${i + 1} of ${files.length}`, {
                  x: pageWidth - marginPoints - 40,
                  y: marginPoints + 10,
                  size: 10,
                  color: rgb(0.5, 0.5, 0.5),
                });
              }
            }
            
            // Save the PDF
            updateProgress(95, 'Generating PDF...');
            const pdfBytes = await pdfDoc.save();
            pdfBlob = new Blob([pdfBytes], { type: 'application/pdf' });
            
            // Conversion complete
            updateProgress(100, 'Conversion complete!');
            setTimeout(() => {
              downloadSection.style.display = 'block';
              convertBtn.disabled = false;
            }, 500);
            
            showToast('PDF created successfully!', 'success');
          } catch (error) {
            console.error('Conversion error:', error);
            updateProgress(0, 'Error occurred');
            showToast('Conversion failed. Please try again.', 'error');
            convertBtn.disabled = false;
          }
        }

        function downloadPDF() {
          if (!pdfBlob) return;
          
          const url = URL.createObjectURL(pdfBlob);
          const a = document.createElement('a');
          a.href = url;
          a.download = `images_${new Date().toISOString().slice(0, 10)}.pdf`;
          document.body.appendChild(a);
          a.click();
          document.body.removeChild(a);
          URL.revokeObjectURL(url);
          
          showToast('Download started', 'success');
        }

        // Helper functions
        function updateProgress(percent, message) {
          progressFill.style.width = `${percent}%`;
          statusMessage.textContent = message;
          
          // Change color when complete
          if (percent === 100) {
            progressFill.style.background = 'linear-gradient(to right, var(--premium-success), var(--premium-info))';
          }
        }

        function resetConversionUI() {
          progressFill.style.width = '0%';
          progressFill.style.background = 'linear-gradient(to right, var(--premium-primary), var(--premium-secondary))';
          statusMessage.textContent = 'Ready to convert';
          downloadSection.style.display = 'none';
          pdfBlob = null;
        }

        function showToast(message, type) {
          // Create toast element
          const toast = document.createElement('div');
          toast.className = `toast toast-${type}`;
          toast.textContent = message;
          
          // Add to body
          document.body.appendChild(toast);
          
          // Remove after delay
          setTimeout(() => {
            toast.classList.add('fade-out');
            setTimeout(() => toast.remove(), 300);
          }, 3000);
        }

        function readFileAsArrayBuffer(file) {
          return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onload = () => resolve(reader.result);
            reader.onerror = reject;
            reader.readAsArrayBuffer(file);
          });
        }

        function loadImage(file) {
          return new Promise((resolve, reject) => {
            const img = new Image();
            img.onload = () => resolve(img);
            img.onerror = reject;
            img.src = URL.createObjectURL(file);
          });
        }

        function createRotatedCanvas(file, rotation) {
          return new Promise((resolve) => {
            const img = new Image();
            img.onload = function() {
              const canvas = document.createElement('canvas');
              
              // Adjust canvas size based on rotation
              if (rotation === 90 || rotation === 270) {
                canvas.width = img.height;
                canvas.height = img.width;
              } else {
                canvas.width = img.width;
                canvas.height = img.height;
              }
              
              const ctx = canvas.getContext('2d');
              
              // Rotate and draw image
              ctx.save();
              ctx.translate(canvas.width / 2, canvas.height / 2);
              ctx.rotate(rotation * Math.PI / 180);
              ctx.drawImage(img, -img.width / 2, -img.height / 2);
              ctx.restore();
              
              resolve(canvas);
            };
            img.src = URL.createObjectURL(file);
          });
        }

        function canvasToJpeg(canvas, quality) {
          return new Promise((resolve) => {
            let qualityValue = 0.9; // default
            if (quality === 'high') qualityValue = 1.0;
            if (quality === 'medium') qualityValue = 0.7;
            if (quality === 'low') qualityValue = 0.5;
            
            canvas.toBlob((blob) => {
              const reader = new FileReader();
              reader.onload = () => resolve(reader.result);
              reader.readAsDataURL(blob);
            }, 'image/jpeg', qualityValue);
          });
        }
      });
    </script>
<script src="js/enhance-ui.js"></script>

</body>
</html>